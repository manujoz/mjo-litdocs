---
export interface Props {
    type?: "vertical" | "horizontal";
    alt?: string;
}

const { type = "horizontal", alt = "MJO-LITUI" } = Astro.props;
const logoId = `logo-${Math.random().toString(36).substring(2, 9)}`;
---

<img id={logoId} class="logo" src={`/logos/logo-${type}-dark.svg`} alt={alt} data-type={type} />

<script>
    import Cookies from "js-cookie";

    function updateLogos() {
        const theme = Cookies.get("mjo-theme") || "dark";
        const logos = document.querySelectorAll(".logo");

        logos.forEach((logo) => {
            const imgElement = logo as HTMLImageElement;
            const logoType = imgElement.dataset.type || "horizontal";
            imgElement.src = theme === "dark" ? `/logos/logo-${logoType}-dark.svg` : `/logos/logo-${logoType}-light.svg`;
        });
    }

    // Update on load
    updateLogos();

    // Update on theme change
    document.addEventListener("mjo-theme:change", () => {
        updateLogos();
    });
</script>
