---
export interface Props {
    currentPath?: string;
}

import type { NavigationSections } from "@/types/navigation";
import Version from "../ui/Version.astro";
import SidebarNav from "../ui/sidebar/SidebarNav.astro";

export interface Props {
    currentPath?: string;
    navigationSections: NavigationSections;
}

const { currentPath = "", navigationSections } = Astro.props;
---

<aside class="sidebar">
    <nav class="sidebar-nav-container">
        <SidebarNav navigationSections={navigationSections} currentPath={currentPath} />
    </nav>
    <div class="sidebar-version">
        <div class="sidebar-version-content">
            <div class="sidebar-version-info">
                <span>Version</span>
                <span class="sidebar-version-number"><Version /></span>
            </div>
            <div class="sidebar-version-link">
                <a href="https://github.com/username/mjo-litui/releases" class="sidebar-link" target="_blank" rel="noopener noreferrer"> View releases â†’ </a>
            </div>
        </div>
    </div>
    <div class="sidebar-actions">
        <div class="sidebar-actions-content">
            <a href="https://github.com/username/mjo-litui/issues/new" class="sidebar-link" target="_blank" rel="noopener noreferrer"> Report an issue </a>
            <a href="/docs/contributing" class="sidebar-link"> Contribute </a>
        </div>
    </div>
</aside>

<style>
    .sidebar {
        position: sticky;
        top: 64px;
        height: calc(100vh - 64px);
        overflow-y: auto;
        padding-top: 2.5rem;
        padding-bottom: 2.5rem;
        box-sizing: border-box;
        scrollbar-width: thin;
        scrollbar-color: var(--scrollbar-thumb-color) transparent;
        display: none;
    }

    .sidebar::-webkit-scrollbar {
        width: 6px;
    }

    .sidebar::-webkit-scrollbar-track {
        background: transparent;
    }

    .sidebar::-webkit-scrollbar-thumb {
        background: var(--scrollbar-thumb-color);
        border-radius: 8px;
        transition: background 0.2s ease;
    }

    .sidebar::-webkit-scrollbar-thumb:hover {
        background: var(--scrollbar-thumb-hover-color);
    }
    .sidebar-nav-container {
        display: flex;
        flex-direction: column;
        gap: 20pxrem;
    }
    .sidebar-version {
        margin-top: 2rem;
        padding-top: 1.5rem;
        border-top: 1px solid var(--mjo-border-color);
    }
    .sidebar-version-content {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
    }
    .sidebar-version-info {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 0.75rem;
        color: var(--mjo-foreground-color-low);
    }
    .sidebar-version-number {
        font-family: ui-monospace, SFMono-Regular, "SF Mono", Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }
    .sidebar-version-link {
        margin-top: 0.5rem;
    }
    .sidebar-actions {
        margin-top: 1rem;
    }
    .sidebar-actions-content {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }
    .sidebar-link {
        display: block;
        font-size: 0.75rem;
        color: var(--mjo-foreground-color-low);
        transition: color 0.15s ease-in-out;
        text-decoration: none;
    }
    .sidebar-link:hover {
        color: var(--mjo-foreground-color);
    }

    @media (min-width: 1024px) {
        .sidebar {
            display: block;
        }
    }
</style>
